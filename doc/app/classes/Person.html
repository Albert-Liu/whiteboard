<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Person [Rails Application Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Person
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/app/models/person_rb.html">app/models/person.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>ActiveRecord::Base</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            <a href="Person.html">Person</a> is a versioned model representing user
            data. As described in the README, the <a href="Person.html">Person</a>
            model and the <a href="User.html">User</a> model bothrepresent the same
            database table.
            </p>
            <h2>Related classes</h2>
            <p>
            <a href="PersonController.html">Person Controller</a>
            </p>
            <p>
            <a href="User.html">User</a>
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000070">parse_twiki</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000067">before_save</a></li>
              <li><a href="#M000066">before_validation</a></li>
              <li><a href="#M000073">create_google_email</a></li>
              <li><a href="#M000074">create_twiki_account</a></li>
              <li><a href="#M000068">emailed_recently</a></li>
              <li><a href="#M000071">find_teams_by_semester</a></li>
              <li><a href="#M000072">get_registered_courses</a></li>
              <li><a href="#M000069">telephones</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk1FirstName</td>
                    <td>=</td>
                    <td class='context-item-value'>self.first_name</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk1LastName</td>
                    <td>=</td>
                    <td class='context-item-value'>self.last_name</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk1WikiName</td>
                    <td>=</td>
                    <td class='context-item-value'>self.twiki_name</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk1Email</td>
                    <td>=</td>
                    <td class='context-item-value'>self.email</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk0Password</td>
                    <td>=</td>
                    <td class='context-item-value'>'just4now'</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk0Confirm</td>
                    <td>=</td>
                    <td class='context-item-value'>'just4now'</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>Twk1Country</td>
                    <td>=</td>
                    <td class='context-item-value'>'USA'</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000070'>
                <a name='M000070'></a>
                <div class='synopsis'>
                  <span class='name'>parse_twiki</span>
                  <span class='arguments'>(username)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000070-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000070-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 45</span>&#x000A;45:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse_twiki</span>(<span class="ruby-identifier">username</span>)&#x000A;46:     <span class="ruby-comment cmt"># The regular expression matches on twiki usernames. Ie AliceSmithJones returns the array [&quot;Alice&quot;, &quot;SmithJones&quot;]</span>&#x000A;47:     <span class="ruby-comment cmt"># This does not work with numbers or characters in the firstname field</span>&#x000A;48:     <span class="ruby-comment cmt"># http://rubular.com/</span>&#x000A;49:      <span class="ruby-identifier">match</span> = <span class="ruby-identifier">username</span>.<span class="ruby-identifier">match</span> <span class="ruby-regexp re">/([A-Z][a-z]*)([A-Z][\w]*)/</span>&#x000A;50:      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">nil?</span>&#x000A;51:        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>&#x000A;52:      <span class="ruby-keyword kw">else</span>&#x000A;53:        <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">match</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">match</span>[<span class="ruby-value">2</span>]]&#x000A;54:      <span class="ruby-keyword kw">end</span>&#x000A;55:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000067'>
                <a name='M000067'></a>
                <div class='synopsis'>
                  <span class='name'>before_save</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000067-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000067-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 24</span>&#x000A;24:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_save</span> &#x000A;25:       <span class="ruby-comment cmt"># We populate some reasonable defaults, but this can be overridden in the database</span>&#x000A;26:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">human_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">human_name</span>.<span class="ruby-identifier">nil?</span>&#x000A;27:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first_name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-value str">&quot;&quot;</span>)  <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;@sv.cmu.edu&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>.<span class="ruby-identifier">nil?</span>&#x000A;28:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000066'>
                <a name='M000066'></a>
                <div class='synopsis'>
                  <span class='name'>before_validation</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000066-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000066-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 20</span>&#x000A;20:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_validation</span>&#x000A;21:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">webiso_account</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">webiso_account</span>.<span class="ruby-identifier">blank?</span>&#x000A;22:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000073'>
                <a name='M000073'></a>
                <div class='synopsis'>
                  <span class='name'>create_google_email</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a Google Apps for University account for the user. For legacy
                  reasons, the accounts are with the domain west.cmu.edu even though the
                  prefered way of talking about the account is with the domain sv.cmu.edu
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000073-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000073-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 80</span>&#x000A;80:    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_google_email</span>&#x000A;81:      <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-value str">&quot;Attempting to create google email account for &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>)&#x000A;82:      (<span class="ruby-identifier">username</span>, <span class="ruby-identifier">domain</span>) = <span class="ruby-identifier">switch_sv_to_west</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)&#x000A;83:      &#x000A;84:      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">domain</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">GOOGLE_APPS_CONFIG</span>[<span class="ruby-value str">'google_domain'</span>]&#x000A;85:        <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-value str">&quot;Domain (&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">domain</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;) is not the same as the google domain (&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">GOOGLE_APPS_CONFIG</span>[<span class="ruby-value str">'google_domain'</span>] )&#x000A;86:        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>&#x000A;87:      <span class="ruby-keyword kw">end</span>&#x000A;88: &#x000A;89:      <span class="ruby-keyword kw">begin</span>&#x000A;90:        <span class="ruby-identifier">user</span> = <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">create_user</span>(<span class="ruby-identifier">username</span>,&#x000A;91:          <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first_name</span>,&#x000A;92:          <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_name</span>,&#x000A;93:          <span class="ruby-value str">'p455wD'</span>)&#x000A;94:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">GDataError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>&#x000A;95: <span class="ruby-comment cmt">#error code : 1300, invalid input : Andrew.Carngie, reason : EntityExists</span>&#x000A;96:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>&#x000A;97:      <span class="ruby-keyword kw">end</span>&#x000A;98:      <span class="ruby-keyword kw">return</span>(<span class="ruby-identifier">user</span>)&#x000A;99:    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000074'>
                <a name='M000074'></a>
                <div class='synopsis'>
                  <span class='name'>create_twiki_account</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Creates a twiki account for the user
                  </p>
                  <p>
                  You may need to modify mechanize as seen here <a
                  href="http://github.com/eric/mechanize/commit/7fd877c60cbb3855652c390c980df1dedfaed820">github.com/eric/mechanize/commit/7fd877c60cbb3855652c390c980df1dedfaed820</a>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000074-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000074-source'>     <span class="ruby-comment cmt"># File app/models/person.rb, line 106</span>&#x000A;106:    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_twiki_account</span>&#x000A;107:      <span class="ruby-identifier">require</span> <span class="ruby-value str">'mechanize'</span>&#x000A;108:      <span class="ruby-identifier">agent</span> = <span class="ruby-constant">Mechanize</span>.<span class="ruby-identifier">new</span>&#x000A;109:      <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">basic_auth</span>(<span class="ruby-value str">'RailsApp'</span>, <span class="ruby-value str">'cmu1qaz'</span>)&#x000A;110:      <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">'http://info.sv.cmu.edu/do/view/TWiki/TWikiRegistration'</span>)&#x000A;111:      <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">'http://info.sv.cmu.edu/do/view/TWiki/TWikiRegistration'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>&#x000A;112:        <span class="ruby-identifier">registration_result</span> = <span class="ruby-identifier">page</span>.<span class="ruby-identifier">form_with</span>(<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/do/register/Main/WebHome'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">registration</span><span class="ruby-operator">|</span>&#x000A;113:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk1FirstName</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first_name</span>&#x000A;114:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk1LastName</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_name</span>&#x000A;115:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk1WikiName</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">twiki_name</span>&#x000A;116:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk1Email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>&#x000A;117:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk0Password</span> = <span class="ruby-value str">'just4now'</span>&#x000A;118:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk0Confirm</span> = <span class="ruby-value str">'just4now'</span>&#x000A;119:            <span class="ruby-identifier">registration</span>.<span class="ruby-constant">Twk1Country</span> = <span class="ruby-value str">'USA'</span>&#x000A;120:          <span class="ruby-comment cmt">#      registration.action = 'register'</span>&#x000A;121:          <span class="ruby-comment cmt">#      registration.topic = 'TWikiRegistration'</span>&#x000A;122:          <span class="ruby-comment cmt">#      registration.rx = '%BLACKLISTPLUGIN{ action=\&quot;magic\&quot; }%'</span>&#x000A;123:        <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">submit</span>&#x000A;124:        <span class="ruby-comment cmt">#   #&lt;WWW::Mechanize::Page::Link &quot;AndrewCarnegie&quot; &quot;/do/view/Main/AndrewCarnegie&quot;&gt;</span>&#x000A;125:        <span class="ruby-identifier">link</span> = <span class="ruby-identifier">registration_result</span>.<span class="ruby-identifier">link_with</span>(<span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">twiki_name</span>)&#x000A;126:        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">link</span>.<span class="ruby-identifier">nil?</span>&#x000A;127:          <span class="ruby-comment cmt">#the user probably already exists</span>&#x000A;128:          <span class="ruby-identifier">pp</span> <span class="ruby-identifier">registration_result</span>&#x000A;129:          <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>&#x000A;130:        <span class="ruby-keyword kw">end</span>&#x000A;131:        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>&#x000A;132:      <span class="ruby-keyword kw">end</span>&#x000A;133: &#x000A;134:      &#x000A;135:    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000068'>
                <a name='M000068'></a>
                <div class='synopsis'>
                  <span class='name'>emailed_recently</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000068-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000068-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 30</span>&#x000A;30:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">emailed_recently</span>&#x000A;31:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">effort_log_warning_email</span>.<span class="ruby-identifier">nil?</span>&#x000A;32:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">effort_log_warning_email</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">day</span>.<span class="ruby-identifier">ago</span>&#x000A;33:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>&#x000A;34:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000071'>
                <a name='M000071'></a>
                <div class='synopsis'>
                  <span class='name'>find_teams_by_semester</span>
                  <span class='arguments'>(year, semester)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000071-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000071-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 57</span>&#x000A;57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_teams_by_semester</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">semester</span>)&#x000A;58:     <span class="ruby-identifier">s_teams</span> = []&#x000A;59:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">teams</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">team</span><span class="ruby-operator">|</span>&#x000A;60:       <span class="ruby-identifier">s_teams</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">team</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">team</span>.<span class="ruby-identifier">course</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">year</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">team</span>.<span class="ruby-identifier">course</span>.<span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">semester</span>&#x000A;61:     <span class="ruby-keyword kw">end</span>&#x000A;62:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s_teams</span>&#x000A;63:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000072'>
                <a name='M000072'></a>
                <div class='synopsis'>
                  <span class='name'>get_registered_courses</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000072-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000072-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 65</span>&#x000A;65:    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_registered_courses</span>&#x000A;66:     <span class="ruby-identifier">semester</span> = <span class="ruby-constant">ApplicationController</span>.<span class="ruby-identifier">current_semester</span>()&#x000A;67: &#x000A;68:     <span class="ruby-ivar">@sql_str</span> = <span class="ruby-node">&quot;select c.* FROM courses c,teams t&#x000A;69:               where t.course_id=c.id and c.year=#{Date.today.year} and c.semester='#{semester}' and t.id in&#x000A;70:               (SELECT tp.team_id FROM teams_people tp, users u where u.id=tp.person_id and u.id=#{self.id})&quot;</span>&#x000A;71: &#x000A;72:     <span class="ruby-ivar">@registered_courses</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-ivar">@sql_str</span>)&#x000A;73:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000069'>
                <a name='M000069'></a>
                <div class='synopsis'>
                  <span class='name'>telephones</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000069-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000069-source'>    <span class="ruby-comment cmt"># File app/models/person.rb, line 36</span>&#x000A;36:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">telephones</span>&#x000A;37:     <span class="ruby-identifier">phones</span> = []&#x000A;38:     <span class="ruby-identifier">phones</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.telephone1_label}: #{self.telephone1}&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone1_label</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone1_label</span>.<span class="ruby-identifier">empty?</span>)&#x000A;39:     <span class="ruby-identifier">phones</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.telephone2_label}: #{self.telephone2}&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone2_label</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone2_label</span>.<span class="ruby-identifier">empty?</span>)&#x000A;40:     <span class="ruby-identifier">phones</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.telephone3_label}: #{self.telephone3}&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone3_label</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone3_label</span>.<span class="ruby-identifier">empty?</span>)&#x000A;41:     <span class="ruby-identifier">phones</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.telephone4_label}: #{self.telephone4}&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone4_label</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">telephone4_label</span>.<span class="ruby-identifier">empty?</span>)&#x000A;42:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">phones</span>&#x000A;43:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
