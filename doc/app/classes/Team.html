<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Team [Rails Application Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Team
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/app/models/team_rb.html">app/models/team.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>ActiveRecord::Base</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000152">add_person_by_human_name</a></li>
              <li><a href="#M000160">add_person_to_team</a></li>
              <li><a href="#M000145">after_initialize</a></li>
              <li><a href="#M000148">after_save</a></li>
              <li><a href="#M000149">before_destroy</a></li>
              <li><a href="#M000147">before_save</a></li>
              <li><a href="#M000146">before_validation</a></li>
              <li><a href="#M000153">build_email</a></li>
              <li><a href="#M000168">faculty_email_addresses</a></li>
              <li><a href="#M000150">google_group</a></li>
              <li><a href="#M000169">peer_evaluation_message_one</a></li>
              <li><a href="#M000170">peer_evaluation_message_two_done</a></li>
              <li><a href="#M000171">peer_evaluation_message_two_incomplete</a></li>
              <li><a href="#M000154">person_name</a></li>
              <li><a href="#M000155">person_name2</a></li>
              <li><a href="#M000162">person_name2=</a></li>
              <li><a href="#M000156">person_name3</a></li>
              <li><a href="#M000163">person_name3=</a></li>
              <li><a href="#M000157">person_name4</a></li>
              <li><a href="#M000164">person_name4=</a></li>
              <li><a href="#M000158">person_name5</a></li>
              <li><a href="#M000165">person_name5=</a></li>
              <li><a href="#M000159">person_name6</a></li>
              <li><a href="#M000166">person_name6=</a></li>
              <li><a href="#M000161">person_name=</a></li>
              <li><a href="#M000151">remove_person</a></li>
              <li><a href="#M000167">show_addresses_for_mailing_list</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>old_email</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      validates_each :<a href="Team.html#M000154">person_name</a>, :<a
                      href="Team.html#M000155">person_name2</a>, :allow_nil, :allow_blank do
                      |record, attr, value|
                      
                      <pre>record.errors.add attr, 'Person does not exist' if Person.find_by_human_name(value).nil?</pre>
                      <p>
                      end
                      </p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>team_members_list_changed</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000152'>
                <a name='M000152'></a>
                <div class='synopsis'>
                  <span class='name'>add_person_by_human_name</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000152-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000152-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 110</span>&#x000A;110:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_person_by_human_name</span>(<span class="ruby-identifier">name</span>)&#x000A;111:     <span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find_by_human_name</span>(<span class="ruby-identifier">name</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;112:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>&#x000A;113:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Attempting to add an unknow person with name=#{name}&quot;</span>&#x000A;114:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">:person_name</span>, <span class="ruby-value str">&quot;Person &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; not found&quot;</span>)&#x000A;115:   <span class="ruby-keyword kw">else</span>&#x000A;116:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">person</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">person</span>) <span class="ruby-comment cmt"># prevent duplicat people in same team</span>&#x000A;117:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>&#x000A;118:       <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">add_member_to_group</span>(<span class="ruby-identifier">person</span>.<span class="ruby-identifier">email</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">google_group</span>)&#x000A;119: <span class="ruby-comment cmt">#      async_google_add_member(person.email,self.build_email)</span>&#x000A;120: &#x000A;121:     <span class="ruby-keyword kw">end</span>&#x000A;122:     <span class="ruby-identifier">person</span>&#x000A;123:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000160'>
                <a name='M000160'></a>
                <div class='synopsis'>
                  <span class='name'>add_person_to_team</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000160-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000160-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 152</span>&#x000A;152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;153:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;154:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">team_members_list_changed</span> = <span class="ruby-keyword kw">true</span>&#x000A;155:       <span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find_by_human_name</span>(<span class="ruby-identifier">name</span>)&#x000A;156:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">nil?</span>&#x000A;157:         <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">:person_name</span>, <span class="ruby-value str">&quot;Person &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; not found&quot;</span>)&#x000A;158:       <span class="ruby-keyword kw">else</span>&#x000A;159:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>&#x000A;160:       <span class="ruby-keyword kw">end</span>&#x000A;161: <span class="ruby-comment cmt">#     this line only needed if this were converted to an ajax call</span>&#x000A;162: <span class="ruby-comment cmt">#      google_apps_connection.add_member_to_group(person.email, self.google_group) unless self.name.blank?</span>&#x000A;163:     <span class="ruby-keyword kw">end</span>&#x000A;164:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000145'>
                <a name='M000145'></a>
                <div class='synopsis'>
                  <span class='name'>after_initialize</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000145-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000145-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 18</span>&#x000A;18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_initialize</span>&#x000A;19:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">old_email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>&#x000A;20:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000148'>
                <a name='M000148'></a>
                <div class='synopsis'>
                  <span class='name'>after_save</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000148-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000148-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 62</span>&#x000A;62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_save</span>&#x000A;63:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">old_email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>&#x000A;64:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000149'>
                <a name='M000149'></a>
                <div class='synopsis'>
                  <span class='name'>before_destroy</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000149-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000149-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 66</span>&#x000A;66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_destroy</span>&#x000A;67:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;trying before_destroy&quot;</span>&#x000A;68:     <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">delete_group</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>)&#x000A;69:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">GDataError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>&#x000A;70:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Attempting to destroy group.  errorcode = #{e.code}, input : #{e.input}, reason : #{e.reason}&quot;</span>&#x000A;71:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000147'>
                <a name='M000147'></a>
                <div class='synopsis'>
                  <span class='name'>before_save</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000147-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000147-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 27</span>&#x000A;27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_save</span>&#x000A;28:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;29:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">old_email</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span><span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">team_members_list_changed</span>&#x000A;30: &#x000A;31:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-value str">&quot;team.before_save() executed&quot;</span>)&#x000A;32: &#x000A;33:     <span class="ruby-identifier">new_email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>&#x000A;34:     <span class="ruby-identifier">old_email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">old_email</span>&#x000A;35: &#x000A;36:     <span class="ruby-identifier">new_group</span> = <span class="ruby-identifier">new_email</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_email</span>.<span class="ruby-identifier">blank?</span>&#x000A;37:     <span class="ruby-identifier">old_group</span> = <span class="ruby-identifier">old_email</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">old_email</span>.<span class="ruby-identifier">blank?</span>&#x000A;38: &#x000A;39:     <span class="ruby-identifier">new_group_exists</span> = <span class="ruby-keyword kw">false</span>&#x000A;40:     <span class="ruby-identifier">old_group_exists</span> = <span class="ruby-keyword kw">false</span>&#x000A;41:     <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">retrieve_all_groups</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">list</span><span class="ruby-operator">|</span>&#x000A;42:       <span class="ruby-identifier">group_name</span> = <span class="ruby-identifier">list</span>.<span class="ruby-identifier">group_id</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)[<span class="ruby-value">0</span>]&#x000A;43:       <span class="ruby-identifier">old_group_exists</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_group</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">group_name</span>&#x000A;44:       <span class="ruby-identifier">new_group_exists</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_group</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">group_name</span>&#x000A;45:     <span class="ruby-keyword kw">end</span>&#x000A;46:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_group_exists</span>&#x000A;47:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;\nDeleting #{old_group}\n&quot;</span>&#x000A;48:       <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">delete_group</span>(<span class="ruby-identifier">old_group</span>)&#x000A;49:       <span class="ruby-identifier">new_group_exists</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_group</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_group</span>&#x000A;50:     <span class="ruby-keyword kw">end</span>&#x000A;51:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_group_exists</span>&#x000A;52:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;\nCreating #{new_group}\n&quot;</span>&#x000A;53:       <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">create_group</span>(<span class="ruby-identifier">new_group</span>, [<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;#{self.name} for course #{self.course.name}&quot;</span>, <span class="ruby-value str">&quot;Domain&quot;</span>])&#x000A;54:     <span class="ruby-keyword kw">end</span>&#x000A;55:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">member</span><span class="ruby-operator">|</span>&#x000A;56:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;\nTeams:adding #{member.email}&quot;</span>&#x000A;57:       <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">add_member_to_group</span>(<span class="ruby-identifier">member</span>.<span class="ruby-identifier">email</span>, <span class="ruby-identifier">new_group</span>)&#x000A;58:     <span class="ruby-keyword kw">end</span>&#x000A;59:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'@west.cmu.edu'</span>,<span class="ruby-value str">'@sv.cmu.edu'</span>)&#x000A;60:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000146'>
                <a name='M000146'></a>
                <div class='synopsis'>
                  <span class='name'>before_validation</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000146-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000146-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 22</span>&#x000A;22:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_validation</span>&#x000A;23:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">strip</span>() <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;24:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span> = <span class="ruby-identifier">build_email</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;25:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000153'>
                <a name='M000153'></a>
                <div class='synopsis'>
                  <span class='name'>build_email</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000153-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000153-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 125</span>&#x000A;125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_email</span>&#x000A;126: <span class="ruby-comment cmt">#    return &quot;#{self.course.semester}-#{self.course.year}-#{self.name}&quot;.chomp.downcase.gsub(/ /, '-') + &quot;@sv.cmu.edu&quot;</span>&#x000A;127:     <span class="ruby-keyword kw">return</span> <span class="ruby-node">&quot;#{self.course.semester}-#{self.course.year}-#{self.name}&quot;</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/ /</span>, <span class="ruby-value str">'-'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;@&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">GOOGLE_APPS_CONFIG</span>[<span class="ruby-value str">'google_domain'</span>]&#x000A;128:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000168'>
                <a name='M000168'></a>
                <div class='synopsis'>
                  <span class='name'>faculty_email_addresses</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000168-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000168-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 193</span>&#x000A;193:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">faculty_email_addresses</span>&#x000A;194:     <span class="ruby-identifier">faculty</span> = []&#x000A;195:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">primary_faculty_id</span>.<span class="ruby-identifier">nil?</span>&#x000A;196:       <span class="ruby-identifier">from_address</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">primary_faculty_id</span>).<span class="ruby-identifier">email</span>&#x000A;197:       <span class="ruby-identifier">faculty</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">from_address</span>&#x000A;198:     <span class="ruby-keyword kw">end</span>&#x000A;199:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">secondary_faculty_id</span>.<span class="ruby-identifier">nil?</span>&#x000A;200:       <span class="ruby-comment cmt">#if there is a coach listed we want the email to come from the coach</span>&#x000A;201:       <span class="ruby-identifier">from_address</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">secondary_faculty_id</span>).<span class="ruby-identifier">email</span>&#x000A;202:       <span class="ruby-identifier">faculty</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">from_address</span>&#x000A;203:     <span class="ruby-keyword kw">end</span>&#x000A;204:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">faculty</span>&#x000A;205:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000150'>
                <a name='M000150'></a>
                <div class='synopsis'>
                  <span class='name'>google_group</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000150-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000150-source'>    <span class="ruby-comment cmt"># File app/models/team.rb, line 73</span>&#x000A;73:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">google_group</span>&#x000A;74:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">email</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)[<span class="ruby-value">0</span>] <span class="ruby-comment cmt">#strips out @sv.cmu.edu</span>&#x000A;75:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000169'>
                <a name='M000169'></a>
                <div class='synopsis'>
                  <span class='name'>peer_evaluation_message_one</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000169-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000169-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 208</span>&#x000A;208:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peer_evaluation_message_one</span>&#x000A;209:    <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;Action Required: please do this peer evaluation survey\n\n by the end of &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">peer_evaluation_second_email</span>.<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">to_formatted_s</span>(<span class="ruby-identifier">:long</span>)&#x000A;210: &#x000A;211:  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000170'>
                <a name='M000170'></a>
                <div class='synopsis'>
                  <span class='name'>peer_evaluation_message_two_done</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000170-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000170-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 213</span>&#x000A;213:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peer_evaluation_message_two_done</span>&#x000A;214:    <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;According to my records, you have finished the peer evaluation. If you wanted to make any last minute changes to it, do it today.&quot;</span>&#x000A;215:  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000171'>
                <a name='M000171'></a>
                <div class='synopsis'>
                  <span class='name'>peer_evaluation_message_two_incomplete</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000171-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000171-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 217</span>&#x000A;217:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peer_evaluation_message_two_incomplete</span>&#x000A;218:    <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;Action Required: please do this peer evaluation survey NOW. \n\n Today is your last day to do the peer evaluation.&quot;</span>&#x000A;219:  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000154'>
                <a name='M000154'></a>
                <div class='synopsis'>
                  <span class='name'>person_name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000154-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000154-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 133</span>&#x000A;133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name</span>&#x000A;134:     &#x000A;135:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000155'>
                <a name='M000155'></a>
                <div class='synopsis'>
                  <span class='name'>person_name2</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000155-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000155-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 136</span>&#x000A;136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name2</span>&#x000A;137:     &#x000A;138:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000162'>
                <a name='M000162'></a>
                <div class='synopsis'>
                  <span class='name'>person_name2=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000162-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000162-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 169</span>&#x000A;169:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name2=</span>(<span class="ruby-identifier">name</span>)&#x000A;170:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;171:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000156'>
                <a name='M000156'></a>
                <div class='synopsis'>
                  <span class='name'>person_name3</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000156-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000156-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 139</span>&#x000A;139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name3</span>&#x000A;140:     &#x000A;141:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000163'>
                <a name='M000163'></a>
                <div class='synopsis'>
                  <span class='name'>person_name3=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000163-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000163-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 172</span>&#x000A;172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name3=</span>(<span class="ruby-identifier">name</span>)&#x000A;173:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;174:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000157'>
                <a name='M000157'></a>
                <div class='synopsis'>
                  <span class='name'>person_name4</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000157-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000157-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 142</span>&#x000A;142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name4</span>&#x000A;143:     &#x000A;144:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000164'>
                <a name='M000164'></a>
                <div class='synopsis'>
                  <span class='name'>person_name4=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000164-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000164-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 175</span>&#x000A;175:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name4=</span>(<span class="ruby-identifier">name</span>)&#x000A;176:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;177:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000158'>
                <a name='M000158'></a>
                <div class='synopsis'>
                  <span class='name'>person_name5</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000158-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000158-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 145</span>&#x000A;145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name5</span>&#x000A;146:     &#x000A;147:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000165'>
                <a name='M000165'></a>
                <div class='synopsis'>
                  <span class='name'>person_name5=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000165-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000165-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 178</span>&#x000A;178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name5=</span>(<span class="ruby-identifier">name</span>)&#x000A;179:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;180:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000159'>
                <a name='M000159'></a>
                <div class='synopsis'>
                  <span class='name'>person_name6</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000159-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000159-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 148</span>&#x000A;148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name6</span>&#x000A;149:     &#x000A;150:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000166'>
                <a name='M000166'></a>
                <div class='synopsis'>
                  <span class='name'>person_name6=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000166-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000166-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 181</span>&#x000A;181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name6=</span>(<span class="ruby-identifier">name</span>)&#x000A;182:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;183:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000161'>
                <a name='M000161'></a>
                <div class='synopsis'>
                  <span class='name'>person_name=</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000161-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000161-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 166</span>&#x000A;166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">person_name=</span>(<span class="ruby-identifier">name</span>)&#x000A;167:     <span class="ruby-identifier">add_person_to_team</span>(<span class="ruby-identifier">name</span>)&#x000A;168:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000151'>
                <a name='M000151'></a>
                <div class='synopsis'>
                  <span class='name'>remove_person</span>
                  <span class='arguments'>(id)</span>
                </div>
                <div class='description'>
                  <p>
                  deprecated; TODO delete this method
                  </p>
                  <pre>def load_old_email&#x000A;  old = Team.find_by_id(self.id, :select =&gt; :email)&#x000A;  return &quot;undefined&quot; if old == nil&#x000A;  oldemail = old.attribute_for_inspect(:email)&#x000A;  if oldemail == &quot;nil&quot;&#x000A;    return &quot;undefined&quot;&#x000A;  else&#x000A;    return oldemail.split('&quot;')[1]&#x000A;  end&#x000A;end&#x000A;def email_changed?&#x000A;  #logger.debug &quot;\nDEBUG: build_email&lt;#{self.build_email}&gt; vs. old_email&lt;#{self.old_email}&gt;&quot;&#x000A;  return self.build_email != self.old_email&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000151-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000151-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 96</span>&#x000A; 96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_person</span>(<span class="ruby-identifier">id</span>)&#x000A; 97:     <span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">id</span>)&#x000A; 98:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>&#x000A; 99:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Attempting to remove an unknow person with id=#{id}&quot;</span>&#x000A;100:   <span class="ruby-keyword kw">else</span>&#x000A;101:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">person</span>)&#x000A;102:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">people</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">person</span>&#x000A;103:       <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">remove_member_from_group</span>(<span class="ruby-identifier">person</span>.<span class="ruby-identifier">email</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">google_group</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span>&#x000A;104: <span class="ruby-comment cmt">#      async_google_remove_member(person.email,self.google_group)</span>&#x000A;105:     <span class="ruby-keyword kw">else</span>&#x000A;106:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Attempting to remove person #{person.human_name} who is not in team #{team.name}&quot;</span>&#x000A;107:     <span class="ruby-keyword kw">end</span>&#x000A;108:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000167'>
                <a name='M000167'></a>
                <div class='synopsis'>
                  <span class='name'>show_addresses_for_mailing_list</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000167-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000167-source'>     <span class="ruby-comment cmt"># File app/models/team.rb, line 185</span>&#x000A;185:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_addresses_for_mailing_list</span>&#x000A;186:     <span class="ruby-ivar">@members</span> = []&#x000A;187:      <span class="ruby-identifier">google_apps_connection</span>.<span class="ruby-identifier">retrieve_all_members</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">google_group</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">member</span><span class="ruby-operator">|</span>&#x000A;188:         <span class="ruby-ivar">@members</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">member</span>.<span class="ruby-identifier">member_id</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'@west.cmu.edu'</span>,<span class="ruby-value str">'@sv.cmu.edu'</span>)&#x000A;189:      <span class="ruby-keyword kw">end</span>&#x000A;190:      <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@members</span>&#x000A;191:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
