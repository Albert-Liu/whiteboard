<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: TeamsController [Rails Application Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          TeamsController
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/app/controllers/teams_controller_rb.html">app/controllers/teams_controller.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a href="ApplicationController.html">ApplicationController</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000182">create</a></li>
              <li><a href="#M000184">destroy</a></li>
              <li><a href="#M000181">edit</a></li>
              <li><a href="#M000174">index</a></li>
              <li><a href="#M000178">index_all</a></li>
              <li><a href="#M000177">index_photos</a></li>
              <li><a href="#M000180">new</a></li>
              <li><a href="#M000173">remove_team_member</a></li>
              <li><a href="#M000179">show</a></li>
              <li><a href="#M000185">survey_monkey</a></li>
              <li><a href="#M000186">survey_monkey_update</a></li>
              <li><a href="#M000176">twiki_index</a></li>
              <li><a href="#M000175">twiki_new</a></li>
              <li><a href="#M000183">update</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000182'>
                <a name='M000182'></a>
                <div class='synopsis'>
                  <span class='name'>create</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  POST /courses/1/teams POST /courses/1/teams.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000182-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000182-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 190</span>&#x000A;190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>&#x000A;191:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">check_valid_names</span>&#x000A;192:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">msg</span>.<span class="ruby-identifier">empty?</span>&#x000A;193:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">msg</span>&#x000A;194:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:error</span>] = <span class="ruby-identifier">msg</span>&#x000A;195:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new'</span>&#x000A;196:       <span class="ruby-keyword kw">return</span>&#x000A;197:     <span class="ruby-keyword kw">end</span>&#x000A;198:     <span class="ruby-identifier">update_course_faculty_label</span>&#x000A;199: &#x000A;200:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:team</span>])&#x000A;201:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>]&#x000A;202: &#x000A;203:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;204:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">save</span>&#x000A;205:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Team was successfully created.'</span>&#x000A;206:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">course_teams_path</span>(<span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course_id</span>)) }&#x000A;207:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:created</span>, <span class="ruby-identifier">:location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span> }&#x000A;208:       <span class="ruby-keyword kw">else</span>&#x000A;209:         <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;210:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;new&quot;</span> }&#x000A;211:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }&#x000A;212:       <span class="ruby-keyword kw">end</span>&#x000A;213:     <span class="ruby-keyword kw">end</span>&#x000A;214:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000184'>
                <a name='M000184'></a>
                <div class='synopsis'>
                  <span class='name'>destroy</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  DELETE /courses/1/teams/1 DELETE /courses/1/teams/1.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000184-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000184-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 247</span>&#x000A;247:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>&#x000A;248:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">is_admin?</span>&#x000A;249:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:error</span>] = <span class="ruby-value str">'You don'</span><span class="ruby-value str">'t have permission to do this action.'</span>&#x000A;250:       <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">teams_url</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">return</span>&#x000A;251:     <span class="ruby-keyword kw">end</span>&#x000A;252: &#x000A;253:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;254:     <span class="ruby-identifier">course</span> = <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course</span>&#x000A;255:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">destroy</span>&#x000A;256: &#x000A;257:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;258:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">course_teams_path</span>(<span class="ruby-identifier">course</span>)) }&#x000A;259:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }&#x000A;260:     <span class="ruby-keyword kw">end</span>&#x000A;261:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000181'>
                <a name='M000181'></a>
                <div class='synopsis'>
                  <span class='name'>edit</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /courses/1/teams/1/edit
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000181-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000181-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 181</span>&#x000A;181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">edit</span>&#x000A;182:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;183:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>]&#x000A;184:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;185:     <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;186:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000174'>
                <a name='M000174'></a>
                <div class='synopsis'>
                  <span class='name'>index</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /courses/1/teams GET /courses/1/teams.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000174-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000174-source'>    <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 44</span>&#x000A;44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index</span>&#x000A;45:     <span class="ruby-ivar">@show_teams_for_many_courses</span> = <span class="ruby-keyword kw">false</span>&#x000A;46:     <span class="ruby-ivar">@machine_name</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;47:     <span class="ruby-ivar">@teams</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;course_id = ?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>]]) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>].<span class="ruby-identifier">empty?</span>&#x000A;48:     <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;49:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;50: &#x000A;51:     <span class="ruby-ivar">@show_section</span> = <span class="ruby-keyword kw">false</span>&#x000A;52:     <span class="ruby-ivar">@teams</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">team</span><span class="ruby-operator">|</span>&#x000A;53:       <span class="ruby-ivar">@show_section</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">team</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">team</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">empty?</span>)&#x000A;54:     <span class="ruby-keyword kw">end</span>&#x000A;55: &#x000A;56:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;57:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_index&quot;</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;teams&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:teams</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span>, <span class="ruby-identifier">:show_new_teams_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_photo_view_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_student_photos</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_course</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>} } <span class="ruby-comment cmt"># index.html.erb</span>&#x000A;58:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span> }&#x000A;59:     <span class="ruby-keyword kw">end</span>&#x000A;60:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000178'>
                <a name='M000178'></a>
                <div class='synopsis'>
                  <span class='name'>index_all</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /teams GET /teams.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000178-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000178-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 134</span>&#x000A;134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index_all</span>&#x000A;135:     <span class="ruby-ivar">@show_teams_for_many_courses</span> = <span class="ruby-keyword kw">true</span>&#x000A;136:     <span class="ruby-ivar">@show_create_course</span> = <span class="ruby-keyword kw">false</span>&#x000A;137:     <span class="ruby-ivar">@show_section</span> = <span class="ruby-keyword kw">false</span>&#x000A;138:     <span class="ruby-ivar">@machine_name</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;139: &#x000A;140:     <span class="ruby-comment cmt">#If possible, we would prefer to do an order by in sql to sort latest semester alphabetical by course name.</span>&#x000A;141:     <span class="ruby-ivar">@teams</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;course_id DESC&quot;</span>)&#x000A;142: <span class="ruby-comment cmt">#    @teams = @teams.sort_by {|team| team.course.year + team.course.semester + team.course.name }.reverse</span>&#x000A;143: &#x000A;144:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;145: <span class="ruby-comment cmt">#      format.html { render :html =&gt; @teams, :layout =&gt; &quot;teams&quot; } # index.html.erb</span>&#x000A;146:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_index&quot;</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;teams&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:teams</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span>, <span class="ruby-identifier">:show_new_teams_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_photo_view_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_student_photos</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_course</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>} } <span class="ruby-comment cmt"># index.html.erb</span>&#x000A;147:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span> }&#x000A;148:     <span class="ruby-keyword kw">end</span>&#x000A;149:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000177'>
                <a name='M000177'></a>
                <div class='synopsis'>
                  <span class='name'>index_photos</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000177-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000177-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 108</span>&#x000A;108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index_photos</span>&#x000A;109:     <span class="ruby-ivar">@teams</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;course_id = ?&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>]]) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>].<span class="ruby-identifier">empty?</span>&#x000A;110:     <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;111:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;112: &#x000A;113:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;114:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;teams&quot;</span> } <span class="ruby-comment cmt"># index.html.erb</span>&#x000A;115:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span> }&#x000A;116:     <span class="ruby-keyword kw">end</span>&#x000A;117:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000180'>
                <a name='M000180'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /courses/1/teams/new GET /courses/1/teams/new.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000180-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000180-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 168</span>&#x000A;168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new</span>&#x000A;169:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">new</span>&#x000A;170:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>]&#x000A;171:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;172:     <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;173: &#x000A;174:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;175:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment cmt"># new.html.erb</span>&#x000A;176:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span> }&#x000A;177:     <span class="ruby-keyword kw">end</span>&#x000A;178:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000173'>
                <a name='M000173'></a>
                <div class='synopsis'>
                  <span class='name'>remove_team_member</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  def ajax_add_team_member
                  </p>
                  <pre>@team = Team.find(params[:team_id])</pre>
                  <p>
                  rescue ActiveRecord::RecordNotFound
                  </p>
                  <pre>logger.error(&quot;Attempt to access invalid team #{params[:team_id]}&quot;)&#x000A;flash[:notice] = 'Attempt to access invalid team'&#x000A;redirect_to teams_url</pre>
                  <p>
                  else
                  </p>
                  <pre>@added_member = @team.add_person_by_human_name(params[:user][:human_name])&#x000A;@course = Course.find(@team.course_id)&#x000A;render :partial =&gt; &quot;list_team_members&quot;, :object=&gt; @team</pre>
                  <p>
                  end
                  </p>
                  <p>
                  def ajax_remove_team_member
                  </p>
                  <pre>@team = Team.find(params[:team_id])</pre>
                  <p>
                  rescue ActiveRecord::RecordNotFound
                  </p>
                  <pre>logger.error(&quot;Attempt to access invalid team #{params[:team_id]}&quot;)&#x000A;flash[:notice] = 'Attempt to access invalid team'&#x000A;redirect_to teams_url</pre>
                  <p>
                  else
                  </p>
                  <pre>@team.remove_person(params[:person_id])&#x000A;@course = Course.find(@team.course_id)&#x000A;render :partial =&gt; &quot;list_team_members&quot;, :object=&gt; @team</pre>
                  <p>
                  end
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000173-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000173-source'>    <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 34</span>&#x000A;34:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_team_member</span>&#x000A;35:     <span class="ruby-identifier">team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:team_id</span>])&#x000A;36:     <span class="ruby-identifier">team</span>.<span class="ruby-identifier">remove_person</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:person_id</span>])&#x000A;37:     <span class="ruby-identifier">team</span>.<span class="ruby-identifier">save</span>&#x000A;38: &#x000A;39:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>&#x000A;40:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000179'>
                <a name='M000179'></a>
                <div class='synopsis'>
                  <span class='name'>show</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /courses/1/teams/1 GET /courses/1/teams/1.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000179-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000179-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 154</span>&#x000A;154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show</span>&#x000A;155:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;156:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;157: &#x000A;158: &#x000A;159: &#x000A;160:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;161:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment cmt"># show.html.erb</span>&#x000A;162:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span> }&#x000A;163:     <span class="ruby-keyword kw">end</span>&#x000A;164:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000185'>
                <a name='M000185'></a>
                <div class='synopsis'>
                  <span class='name'>survey_monkey</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  GET /courses/1/teams/1/survey_monkey
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000185-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000185-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 264</span>&#x000A;264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">survey_monkey</span>&#x000A;265:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:course_id</span>])&#x000A;266:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;267: &#x000A;268:     <span class="ruby-ivar">@emails</span> = []&#x000A;269:     <span class="ruby-ivar">@first_names</span> = []&#x000A;270:     <span class="ruby-ivar">@full_names</span> = []&#x000A;271:     <span class="ruby-ivar">@ids</span> = []&#x000A;272:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">people</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">person</span><span class="ruby-operator">|</span>&#x000A;273:       <span class="ruby-ivar">@emails</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">email</span>&#x000A;274:       <span class="ruby-ivar">@first_names</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name</span>&#x000A;275:       <span class="ruby-ivar">@full_names</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">human_name</span>&#x000A;276:       <span class="ruby-ivar">@ids</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">id</span>&#x000A;277:     <span class="ruby-keyword kw">end</span>&#x000A;278: &#x000A;279:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_first_email</span>.<span class="ruby-identifier">nil?</span>)&#x000A;280:       <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_first_email</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>()&#x000A;281:     <span class="ruby-keyword kw">end</span>&#x000A;282:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_second_email</span>.<span class="ruby-identifier">nil?</span>)&#x000A;283:         <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_second_email</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>()&#x000A;284:     <span class="ruby-keyword kw">end</span>&#x000A;285: &#x000A;286:     <span class="ruby-ivar">@first_email_date</span> = <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_first_email</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y%m%d&quot;</span>)&#x000A;287:     <span class="ruby-ivar">@second_email_date</span> = <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_second_email</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y%m%d&quot;</span>)&#x000A;288: &#x000A;289:     <span class="ruby-comment cmt">#    @first_email_date = @team.peer_evaluation_first_email.to_s.gsub('-','')</span>&#x000A;290: <span class="ruby-comment cmt">#    @second_email_date = @team.peer_evaluation_second_email.to_s.gsub('-','')</span>&#x000A;291: &#x000A;292:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;293:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment cmt"># show.html.erb</span>&#x000A;294:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span> }&#x000A;295:     <span class="ruby-keyword kw">end</span>&#x000A;296:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000186'>
                <a name='M000186'></a>
                <div class='synopsis'>
                  <span class='name'>survey_monkey_update</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000186-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000186-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 298</span>&#x000A;298:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">survey_monkey_update</span>&#x000A;299:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;300: &#x000A;301:     <span class="ruby-identifier">firstDate</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:yearFieldOne</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:monthFieldOne</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:dayFieldOne</span>]&#x000A;302:     <span class="ruby-identifier">firstDate</span> = <span class="ruby-identifier">firstDate</span>.<span class="ruby-identifier">to_date</span>&#x000A;303: &#x000A;304:     <span class="ruby-identifier">secondDate</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:yearFieldTwo</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:monthFieldTwo</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:dayFieldTwo</span>]&#x000A;305:     <span class="ruby-identifier">secondDate</span> = <span class="ruby-identifier">secondDate</span>.<span class="ruby-identifier">to_date</span>&#x000A;306: &#x000A;307:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_first_email</span> = <span class="ruby-identifier">firstDate</span>&#x000A;308:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">peer_evaluation_second_email</span> = <span class="ruby-identifier">secondDate</span>&#x000A;309:     <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">save!</span>&#x000A;310: &#x000A;311:     <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">survey_monkey_path</span>(<span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course</span>, <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">id</span>))&#x000A;312:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000176'>
                <a name='M000176'></a>
                <div class='synopsis'>
                  <span class='name'>twiki_index</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  generate the team table for a course on a page hosted on the twiki server
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000176-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000176-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 85</span>&#x000A; 85:    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">twiki_index</span>&#x000A; 86:     <span class="ruby-ivar">@show_teams_for_many_courses</span> = <span class="ruby-keyword kw">false</span>&#x000A; 87:     <span class="ruby-ivar">@machine_name</span> = <span class="ruby-value str">&quot;http://rails.sv.cmu.edu&quot;</span>&#x000A; 88: &#x000A; 89:      <span class="ruby-identifier">url</span> = <span class="ruby-identifier">get_twiki_http_referer</span>()&#x000A; 90:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;twiki_url = ?&quot;</span>, <span class="ruby-identifier">url</span>])&#x000A; 91: &#x000A; 92:     <span class="ruby-ivar">@show_create_course</span> = <span class="ruby-keyword kw">false</span>&#x000A; 93:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@course</span>.<span class="ruby-identifier">nil?</span>)&#x000A; 94:       <span class="ruby-ivar">@show_create_course</span> = <span class="ruby-keyword kw">true</span>&#x000A; 95:        <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_index&quot;</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:teams</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span>, <span class="ruby-identifier">:show_new_teams_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_photo_view_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_student_photos</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_course</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}&#x000A; 96:        <span class="ruby-keyword kw">return</span>&#x000A; 97:     <span class="ruby-keyword kw">end</span>&#x000A; 98:     <span class="ruby-ivar">@teams</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;course_id = ?&quot;</span>, <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">id</span>]) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">nil?</span>&#x000A; 99: &#x000A;100:     <span class="ruby-ivar">@show_section</span> = <span class="ruby-keyword kw">false</span>&#x000A;101:     <span class="ruby-ivar">@teams</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">team</span><span class="ruby-operator">|</span>&#x000A;102:       <span class="ruby-ivar">@show_section</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">team</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">team</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">empty?</span>)&#x000A;103:     <span class="ruby-keyword kw">end</span>&#x000A;104: &#x000A;105:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_index&quot;</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:teams</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@teams</span>, <span class="ruby-identifier">:show_new_teams_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_photo_view_link</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:show_student_photos</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:show_course</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}&#x000A;106:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000175'>
                <a name='M000175'></a>
                <div class='synopsis'>
                  <span class='name'>twiki_new</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Create a new team from a team table page hosted on the twiki server
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000175-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000175-source'>    <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 63</span>&#x000A;63:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">twiki_new</span>&#x000A;64:     <span class="ruby-comment cmt"># Example url:</span>&#x000A;65:     <span class="ruby-comment cmt"># http://info.sv.cmu.edu/twiki/bin/view/Fall2008/Foundations/StudentTeams</span>&#x000A;66:     <span class="ruby-comment cmt"># http://info.sv.cmu.edu/twiki/bin/view/Fall2009/Foundations/WebHome</span>&#x000A;67:     <span class="ruby-identifier">url</span> = <span class="ruby-identifier">get_twiki_http_referer</span>()&#x000A;68:     <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;twiki_url = ?&quot;</span>, <span class="ruby-identifier">url</span>])&#x000A;69:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@course</span>.<span class="ruby-identifier">nil?</span>)&#x000A;70:       <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">url</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)&#x000A;71:       <span class="ruby-ivar">@course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">new</span>()&#x000A;72:       <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">twiki_url</span> = <span class="ruby-identifier">url</span>&#x000A;73:       <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>]&#x000A;74:       <span class="ruby-identifier">match</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>].<span class="ruby-identifier">match</span> <span class="ruby-regexp re">/(\D+)(\d+)/</span>&#x000A;75:       <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">semester</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">match</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">match</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">nil?</span>)&#x000A;76:       <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">year</span> = <span class="ruby-identifier">match</span>[<span class="ruby-value">2</span>] <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">match</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">match</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">nil?</span>)&#x000A;77:       <span class="ruby-ivar">@course</span>.<span class="ruby-identifier">save</span>()&#x000A;78:     <span class="ruby-keyword kw">else</span>&#x000A;79:       <span class="ruby-comment cmt">#error</span>&#x000A;80:     <span class="ruby-keyword kw">end</span>&#x000A;81:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">url</span>&#x000A;82:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000183'>
                <a name='M000183'></a>
                <div class='synopsis'>
                  <span class='name'>update</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  PUT /courses/1/teams/1 PUT /courses/1/teams/1.xml
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000183-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000183-source'>     <span class="ruby-comment cmt"># File app/controllers/teams_controller.rb, line 218</span>&#x000A;218:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>&#x000A;219:     <span class="ruby-ivar">@team</span> = <span class="ruby-constant">Team</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])&#x000A;220: &#x000A;221:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">check_valid_names</span>&#x000A;222:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">msg</span>.<span class="ruby-identifier">empty?</span>&#x000A;223:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">msg</span>&#x000A;224:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:error</span>] = <span class="ruby-identifier">msg</span>&#x000A;225:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'update'</span>&#x000A;226:       <span class="ruby-keyword kw">return</span>&#x000A;227:     <span class="ruby-keyword kw">end</span>&#x000A;228:     <span class="ruby-identifier">handle_teams_people</span>&#x000A;229: &#x000A;230:     <span class="ruby-identifier">update_course_faculty_label</span>&#x000A;231: &#x000A;232:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>&#x000A;233:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:team</span>])&#x000A;234:         <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Team was successfully updated.'</span>&#x000A;235:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">course_teams_path</span>(<span class="ruby-ivar">@team</span>.<span class="ruby-identifier">course</span>)) }&#x000A;236:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">head</span> <span class="ruby-identifier">:ok</span> }&#x000A;237:       <span class="ruby-keyword kw">else</span>&#x000A;238:         <span class="ruby-ivar">@faculty</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;twiki_name&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_teacher = true&quot;</span>])&#x000A;239:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span> }&#x000A;240:         <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span>  { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@team</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:unprocessable_entity</span> }&#x000A;241:       <span class="ruby-keyword kw">end</span>&#x000A;242:     <span class="ruby-keyword kw">end</span>&#x000A;243:   <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
